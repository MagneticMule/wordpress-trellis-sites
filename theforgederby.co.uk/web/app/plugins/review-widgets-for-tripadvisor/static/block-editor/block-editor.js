!function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=window.wp.components},function(e,t,n){"use strict";n.r(t);var l=n(0),i=wp.blocks.registerBlockType,c=function(){return React.createElement(l.Icon,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},React.createElement("path",{fill:"none",d:"M-1-1h52v52H-1z"}),React.createElement("path",{d:"M-.043 29.977c0 11.016 8.97 19.968 19.936 19.968H29.96c11.065 0 19.936-8.952 19.936-19.968V19.975C49.896 8.958 40.925.007 29.96.007H19.893C8.828.007-.043 8.958-.043 19.975v10.002z",fillRule:"evenodd",clipRule:"evenodd",fill:"#2aa8d7"}),React.createElement("path",{d:"M23.854 24.574l10.098-10.098c.714-.743 1.938-.743 2.754 0l2.754 2.71a1.982 1.982 0 010 2.71L25.996 33.335c0 .037-.102.111-.102.148l-2.754 2.71c-.408.372-.918.557-1.326.557-.51 0-1.02-.185-1.326-.556l-2.754-2.71c0-.038-.102-.075-.102-.149l-7.038-7.054a1.982 1.982 0 010-2.71l2.754-2.71c.714-.742 1.938-.742 2.754 0l5.304 5.309.51.483 5.406 5.383-3.468-7.462z",fillRule:"evenodd",clipRule:"evenodd",fill:"#fff"}))})};i("trustindex/block-selector",{title:"Trustindex",description:"Trustindex widget plugin",icon:c(),category:"widgets",attributes:{widget_id:{type:"string"},trustindex_widgets:{type:"object"},free_widgets:{type:"object"},setup_url:{type:"string"},selected_type:{type:"string",default:"admin"}},edit:function(e){var t=e.attributes,n=e.setAttributes;function i(e){"type-select"===e.target.id&&"custom-id"===e.target.selectedOptions[0].id?(n({selected_type:"custom"}),n({widget_id:""})):"type-select"===e.target.id?(n({widget_id:e.target.value}),e.target.value.length>=20?n({selected_type:"admin"}):n({selected_type:"free"})):n({widget_id:e.target.value})}return t.trustindex_widgets||wp.apiFetch({path:"trustindex/v1/setup-complete"}).then((function(e){e.result&&n({free_widgets:e.result}),e.setup_url&&n({setup_url:e.setup_url}),wp.apiFetch({path:"trustindex/v1/get-widgets"}).then((function(e){n({trustindex_widgets:e}),e&&e.length||"admin"!==t.selected_type||n({selected_type:"custom"}),e&&e.length&&!t.widget_id&&n({widget_id:e[0].widgets[0].id})}))})),t.trustindex_widgets?React.createElement("div",{className:"components-placeholder"},React.createElement("table",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("span",{style:{fontSize:"32px"}},c()," Trustindex widget")),React.createElement("td",null)),React.createElement("tr",null,React.createElement("td",null,React.createElement("select",{id:"type-select",style:{fontSize:"13px",border:"1px solid",width:"100%"},onChange:i},React.createElement("optgroup",{label:"Trustindex widgets"},t.trustindex_widgets.length?t.trustindex_widgets[0].widgets.map((function(e){return React.createElement("option",{selected:t.widget_id===e.id,value:e.id},e.name)})):React.createElement("option",{disabled:!0}," No Trustindex account connected ")),React.createElement("optgroup",{label:"Custom widget"},React.createElement("option",{selected:"custom"===t.selected_type,value:t.widget_id,id:"custom-id"},"Custom widget id")),React.createElement("optgroup",{label:"Free widgets"},Object.keys(t.free_widgets).map((function(e){return React.createElement("option",{disabled:0===t.free_widgets[e],selected:e===t.widget_id,value:e},"Free "+e+" review widget"+(0===t.free_widgets[e]?" - not configured yet":""))}))))),React.createElement("td",{style:{fontSize:"15px"}},React.createElement("span",{style:{display:"flex",alignItems:"center",lineHeight:"16px"}},t.trustindex_widgets.length?"":React.createElement(l.Icon,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 130 130"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#FF4141",d:"M61.44 0c33.933 0 61.439 27.507 61.439 61.439s-27.506 61.439-61.439 61.439C27.507 122.879 0 95.372 0 61.439S27.507 0 61.44 0zm12.011 39.151a7.011 7.011 0 019.986-.027c2.764 2.776 2.775 7.292.027 10.083L71.4 61.445l12.076 12.249c2.729 2.77 2.689 7.257-.08 10.022-2.773 2.765-7.23 2.758-9.955-.013L61.446 71.54 49.428 83.728a7.011 7.011 0 01-9.986.027c-2.763-2.776-2.776-7.293-.027-10.084L51.48 61.434 39.403 49.185c-2.728-2.769-2.689-7.256.082-10.022 2.772-2.765 7.229-2.758 9.953.013l11.997 12.165 12.016-12.19z"}))}),t.trustindex_widgets.length?"":React.createElement("span",{style:{marginLeft:"5px"}},"No Trustindex account connected. ",React.createElement("a",{target:"_blank",href:t.setup_url},"Solve"))))),React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{onChange:i,value:t.widget_id,style:{border:"1px solid black",display:"custom"===t.selected_type?"inherit":"none"},class:"block-editor-plain-text blocks-shortcode__textarea",type:"text"}))))):React.createElement("div",{class:"components-placeholder"},"Loading...")},save:function(e){return e.attributes,null}})}]);